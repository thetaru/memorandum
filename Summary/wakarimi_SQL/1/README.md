# データベース
## 1.1 データベースとSQL
### ■ データベースとは
データベースとは、さまざまな**データの検索や登録、変更、削除ができる**ようになっているシステムのことです。
### ■ リレーショナルデータベース
リレーショナルデータベースとは、データベースの一種です。  
データを種類ごとにテーブル(表)の形で保持しておき、必要に応じてテーブルを連結したり加工できます。
### ■ リレーショナルデータベース製品
リレーショナルデータベースはあくまでデータベースの種類であり、それを扱うためのソフトウェア製品が必要です。  
主に`MySQL`や`PostgreSQL`が使用されます。
### ■ SQLとは
`SQL`とは、リレーショナルデータベースからデータを検索したり加工するための専門言語です。
## 1.2 データベースの特徴
リレーショナルデータベース(RDB)とExcelの比較をします。
### ■ データとロジックが分離している
`Excel`では、データとロジックが同じシートに載っています。  
`RDB`では、データとロジックが分離しています。   
ロジックを切り替えることができることがRDBの強みです。
### ■ データを柔軟に組み合わせられる
`Excel`では、1つのシートやテーブルにいろんな種類のデータを入れることがあります。  
`RDB`では、種類ごとに細かくテーブルを分けます。必要に応じてテーブルを結合することで望みの結果を得ます。
### ■ データの整合性を保つ
`Excel`では、**登録済みのデータを使用**できるよう制限できますが、他で使用中のデータを削除できます。  
`RDB`では、**登録済みのデータしか**使用できないよう制限するだけでなく、他で使用中のデータは削除できません。  
このように、リレーショナルデータベースではデータの整合性が保たれるような仕組みになっています。
### ■ データの修正漏れを防ぐ
`Excel`では、あるデータが複数の箇所に存在することがあります。  
そのため、そのデータを修正する際はすべての箇所を修正しなければなりません。  
`RDB`では、データは1箇所にのみ保存し必要に応じてテーブルを連結します。  
そのため、そのデータを1箇所だけ修正して再連結すればよく、複数箇所を修正する必要はありません。  
このように、リレーショナルデータベースではデータの矛盾が起こりにくいです。
### ■ 大量のデータを扱える
`Excel`では、1シートあたりの行数は、最大でせいぜい100万行です。  
`RDB`では、テーブルの行数が数十億単位でも問題なく動作します。
### ■ 同時変更による競合を考慮している
`Excel`では、複数人が同時に1つのファイルを編集できますが同じ箇所を同時に変更したときの競合は考慮しません。  
`RDB`では、変更の競合を検出したり、整合性がとれなくなったら変更をキャンセルできます(トランザクション機能)。  
複数人が同じデータを同時に変更するなら、必ずデータベース製品を使いましょう。
## 1.3 データベースが苦手なこと
ExcelにできてRDBにできないことを紹介します。  
大体、GUIが必要になるもの(図示など)はできません。
- グラフ表示
- フォーム作成
- 帳票機能

## 1.4 テーブルについて
リレーショナルデータベース(RDB)では、データをテーブル(表)の形で保持しています。
### ■ テーブルの構造
テーブルは、`行(Row)`と`列(Column)`から構成されます。  
また行と列が交わる箇所を`フィールド`といいます。
|No|名前|分類|タイプ1|タイプ2|
|:---:|:---:|:---:|:---:|:---:|
|1|フシギダネ|たねポケモン|くさ|どく|
|2|フシギソウ|たねポケモン|くさ|どく|
|3|フジギバナ|たねポケモン|くさ|どく|
|4|ヒトカゲ|とかげポケモン|ほのお|NULL|
|5|リザード|かえんポケモン|ほのお|NULL|
|6|リザードン|かえんポケモン|ほのお|ひこう|

列を識別するには列名を使います。(上だとNo, 名前, 分類, タイプ1, タイプ2が列名になります。)  
行を識別するには列名のようなモノでなく、行を指定するための列とその値(主キーという)を使います。(上だとNo列が主キーになります。)  
例えば、No=1を指定すればフシギダネの行、No=4を指定すればヒトカゲの行になります。
  
このように行を識別するのは(主キーの)`値`ですが、列を識別するのは`名前(列名)`です。  
また行と列は対等ではなく、RDBではテーブルは`行の集まり`であって`列の集まり`で**ない**ことに注意しましょう。
### ■ テーブルの種類
テーブルは`縦方向に伸びる/伸びない`、`横方向に伸びる/伸びない`の組み合わせがあります（2 × 2 ＝ 4 種類）。  
RDBでは列を識別するのに列名を使うため、横に伸びないテーブルを扱うのが得意(行に追加するだけでいいから)で縦に伸びるテーブルを扱うのが不得意(列の追加にはテーブルやSQLの書き換えが必要だから)です。
