# データベースのセットアップ
## 2-3-1 データベース環境の構築
RDSを用いて、PostgreSQLを構築して利用します。(本番環境では、複数AZに冗長化して構築するのが一般的ですが、今回はシングルAZ構成とします。)  
RDSはAWSが提供するリレーショナルデータベースのマネージドサービスです。  
RDSではデータベースが稼働するOSへのログインができないなどの制限が存在します。
## 2-3-2 データベース環境の構築
データベース環境(RDS及び踏み台サーバ)の構築はCloudFormationで行います。  
CloudFormationテンプレートは`10_rds_ope_cfn.yaml`を利用します。  
マネジメントコンソールのCloudFormationのページを開き、`スタックの作成`-`新しいリソースを使用(標準)`を選び、`スタックの作成`画面を表示します。
  
![Image01](./images/2-3-1.png)
  
次に、`テンプレートの準備完了`-`テンプレートファイルのアップロード`を選び、`ファイルの選択`で`10_rds_cfn.yaml`を選択し、`次へ`を押します。
  
![Image02](./images/2-3-2.png)
  
スタックの名前とパラメータ(EksWorkVPC、OpeServerRouteTable)を指定します。  
`スタックの名前`には`eks-work-rds`と入力してください。
  
![Image03](./images/2-3-3.png)
  
パラメータの値を入力したら`次へ`を押して次のページに進みます。
  
![Image04](./images/2-3-4.png)
  
`スタックオプションの設定`は値を変更せず、そのまま`次へ`を押します。
  
![Image05](./images/2-3-5.png)
  
`レビュー`画面では、テンプレート名及び入力したパラメータ(EksWorkVPC、OpeServerRouteTable)の値を確認してください。  
※ OpeServerRouteTableの値は`eks-work-base`-`出力`の`Route Table`の値です。  
値の確認とチェックボックスのチェックを終えたら、`スタックの作成`を押してデータベース環境の構築を開始します。
