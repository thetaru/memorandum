# シグナルにかかわるAPI
## 13.1 シグナル
シグナルは、ユーザ(端末)やカーネルがプロセスに何かを通知する目的で使われます。  
シグナルにはいくつか種類があり、マクロで名前が付けられていますが、その実態はint型の整数値です。  
  
プロセスで特に設定をしていない場合は、配送されたシグナルの扱いをカーネルが決定し、処理します。  
処理方法は次の3つです。
1. 無視する
> SIGCHILD
3. プロセスを終了させる
> SIGINT
5. プロセスのコアダンプを作成して異常終了させる
> SIGSEGV

※ コアダンプとは、プロセスが使用するメモリのスナップショットのことです。

|シグナル名|捕捉|挙動|原因と用途|
|:---|:---|:---|:---|
|SIGINT|○|終了|割り込み</br>プログラムを中止したいときに使う|
|SIGHUP|○|終了|ユーザがログアウトしたときなどに生成される</br>デーモンプロセスでは設定ファイルの読み直しに使うことが多い|
|SIGPIPE|○|終了|切れたパイプに書き込むと生成される|
|SIGTERM|○|終了|プロセスを終了させるときに使う</br>killでシグナルを指定しなかったときのデフォルトの値|
|SIGKILL|×|終了|確実にプロセスを終了させるために使う|
|SIGCHILD|○|無視|子プロセスが停止または終了したときに生成される|
|SIGSEGV|○|コアダンプ|アクセスが禁止されているメモリ領域にアクセスしたときに生成される|
|SIGBUS|○|コアダンプ|アラインメント違反(ポインタ操作を間違えた時など)時に生成される|
|SIGFPE|○|コアダンプ|算術演算のエラー(ゼロ除算や浮動小数点のオーバーフローなど)によって生成される。|

### ■ シグナルの捕捉
シグナルの捕捉とは、そのシグナルが配送されたときの挙動を変更することができます。  
シグナルを受けた時のデフォルトの挙動はsigaction()というAPIを使って変更することが可能です。

## 13.2 シグナルを捕捉する
シグナルの処理をカーネルに任せず、自分でシグナルを捕捉(トラップ)するしてみます。
### ■ signal(2)
```c
#include <signal.h>

void (*signal(int sig, void (*func) (int)))(int);
```
見づらいのでtypedefを使って整形します。
```c
typedef void (*sighandler_t)(int);
sighandler_t signal(int sig, sighandler_t func);
```
sighandler_tのtypedefについて説明します。
