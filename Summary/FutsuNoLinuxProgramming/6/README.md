# ストリームにかかわるライブラリ関数
## 6.1 stdio
## 6.1.1 バッファリング
読み込み側を例にして説明します。  
read()は、バイト単位の入力しかできないので、stdioは一時的にデータを保存する場所(バッファ)を用意します。  
そしてread()を使ってバッファに入力し、プログラムから1バイトほしいと言われたらバッファから1バイト取って返します。  
このようにバッファ経由でデータをやりとりすることを、バッファリングといいます。
## 6.1.2 バッファリングモード
書き込み側の場合も読み込みと同様にバッファが必要になります。  
バイト単位や行単位の出力を受け、バッファがいっぱいになったらwrite()で書き出します。  
ただし、例外があります。  
1. バッファがいっぱいになったタイミングがわからないこと
> 特にストリームが端末とつながっている場合バッファがいついっぱいになるのかわからないので、改行('\n')が書き込まれた時点でwrite()します。
2. stdioストリームがアンバッファードモードになっていること
> アンバッファードモードのstdioストリームに書き込むと、バッファリングせずにwrite()されます。
3. stdioストリームが標準エラー出力に対応するストリームstderrになっていること
> stderrは、例外的に最初からアンバッファードモードになっています。エラーメッセージをユーザにすぐ見せたいためです。

## 6.1.3 FILE型
システムコールでは、ストリームを指すのにファイルディスクリプタ(整数)を使っていました。  
一方、stdioではFILE型へのポインタを使います。  
※ FILE型は、typedefで定義された型で、ファイルディスクリプタとstdioバッファの内部情報が入っています。

## 6.1.4 stdioでの標準入出力
システムコールでは、標準入力や標準出力する際は、それぞれに対応するファイルディスクリプタ(やそのマクロ)が提供されていました。  
それに対応する形でstdioにも標準入力や標準出力を表現するFILE\*型の変数が用意されています。
|ファイルディスクリプタ|マクロ名|stdioでの変数名|意味|
|:---|:---|:---|:---|
|0|STDIN_FILENO|stdin|標準入力|
|1|STDOUT_FILENO|stdout|標準出力|
|2|STDERR_FILENO|stderr|標準エラー出力|
