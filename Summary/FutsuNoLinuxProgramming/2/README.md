# Linuxカーネルの世界
## 2.1 オペレーティングシステム
### ■ オペレーティングシステム
特になし
### ■ カーネル
カーネルはただ一つのプログラムで構成されていて、コンピュータを構成するすべてのハードウェアとソフトウェアを管理しています。  
手元のLinuxマシン(CentOS Stream)では`/boot`直下にありました。
```
# ls -l /boot/vmlinuz*
```
```
-rwxr-xr-x. 1 root root  9653384  2月 16 07:15 /boot/vmlinuz-0-rescue-2ae4211ae16547b5945b9acec01f1396
-rwxr-xr-x. 1 root root  9653384 12月  4 07:24 /boot/vmlinuz-4.18.0-257.el8.x86_64
-rwxr-xr-x. 1 root root  9936008  2月  4 05:43 /boot/vmlinuz-4.18.0-277.el8.x86_64
-rwxr-xr-x  1 root root 10030216  3月 16 07:47 /boot/vmlinuz-4.18.0-294.el8.x86_64
```
### ■ デバイスとデバイスドライバ
カーネルの役割の1つは、コンピュータのハードウェアをとりまとめることです。  
ハードウェアは以下のようなものがあります。
- CPU
- メモリ
- ハードディスク
- DVDドライブ
- CD-ROMドライブ
- グラフィックアダプタ
- ネットワークアダプタ
- サウンドカード
- 時計

このような比較的単位の大きい物理的な部品をデバイスといいます。  
カーネルは上記に挙げたようなデバイスを統括しています。  
  
Linuxでは様々な種類のデバイスを扱うためにデバイスを操作する部分のみを独立させる設計になってます。(e.g. XXX HDD と YYY HDDの種類の差を吸収したいとか)  
  
この特定のデバイスを操作するためのソフトウェア部品のことをデバイスドライバといいます。
### ■ システムコール
ハードウェアと直接やりとりできるのはカーネルだけ(デバイスドライバだけ)なので、普通のプログラムがハードウェアを操作する際はカーネルに仕事を頼んで間接的に操作するしかありません。  
カーネルに仕事を頼むにはシステムコールを使います。システムコールというものの、その呼び出しも関数の呼び出しと変わりません。
## 2.2 ライブラリ
### ■ ライブラリとライブラリ関数
プログラミングをする上で、システムコール以外にも使える関数にライブラリ関数があります。
### ■ システムコールとライブラリ関数
ライブラリ関数は内部でシステムコールを使われていることもありますし、ライブラリ関数だけで完結していることもあります。  
### ■ libc
Linuxで用意されているライブラリに標準Cライブラリ(libc)があります。  
手元のLinuxマシン(CentOS Stream)では`/lib64`直下にありました。
```
# ls -l /lib64/libc.so.6
```
```
lrwxrwxrwx 1 root root 12  3月 12 04:46 /lib64/libc.so.6 -> libc-2.28.so
```
`libc.so.6`はシンボリックリンクになっていて`libc-2.28.so`というファイルを指しています。  
`/lib64`にあるファイルのほとんどが標準Cライブラリを構成するファイルです。
### ■ API
APIとは、何かを使ってプログラミングするときのインターフェイスのことを指します。  
例えば、(Cの)ライブラリのAPIは関数やマクロです。カーネルのAPIはシステムコールです。
