# プロセスとハードウェア
## 11.1 プロセスとは何か
### ■ 仮想メモリ機構の応用
- ページング
> ハードディスクを物理メモリの代わりに使う機構です。
- メモリマップトファイル
> ファイルをメモリとしてアクセスできるようにします。  
> つまり、メモリを読むとファイルを読むことになり、メモリに書き込むとファイルに書き込まれます。  
- 共有メモリ
> 特定範囲の物理メモリを複数プロセスで共有する機構です。  
> 1つの物理メモリのページを2つのプロセスの論理アドレスに対応付けるだけです。

### ■ アドレス空間の構造
- テキスト(text)領域
> 機械語のプログラムのことです。
- データ(data)領域
> グローバル変数や関数内のスタティック変数のうち初期化済みのものに加えて文字列リテラルなどが置かれます。
- BSS領域
> グローバル変数や関数内のスタティック変数のうち初期化が必要ないものが置かれます。  
> 実行ファイルではこの領域はサイズだけが記録してあります。
- ヒープ(heap)領域
> 後述するmalloc()が管理する領域です。  
> この領域は実行時に拡大・縮小する可能性があります。
- スタック(stack)領域
> 関数呼び出しに関連したデータを置くところです。  
> 例えば関数の引数やローカル変数などが置かれます。
## 11.2 メモリ管理にかかわるAPI
### ■ malloc(3)
```c
#include <stdlib.h>

void *malloc(size_t size);
```

|引数|意味|
|:---|:---|
|size|確保したいメモリのバイトサイズ|

|戻り値|意味|
|:---|:---|
|成功|確保したメモリブロックを指すポインタ|
|失敗|NULL|

malloc()は、sizeバイトのメモリをヒープ領域に割り当てます。  
戻り値の型はvoid\*なので、適切なポインタ型にキャストして使います。  
  
なお、割り当てられたメモリの内容がどうなっているか分からないので、後述するcalloc()を使うかmemset()を併用するかします。  
  
malloc()で確保したメモリ領域は後述するfree()で必ず開放します。

### ■ calloc(3)
```c
#include <stdlib.h>

void *calloc(size_t nmemb, size_t size);
```

|引数|意味|
|:---|:---|
|nmemb|sizeバイトのブロック数|
|size|確保したいメモリのバイトサイズ|

|戻り値|意味|
|:---|:---|
|成功|void\*|
|失敗|NULL|

calloc()は、size \* nmembバイト(i.e. sizeバイトのブロックをnmemb個割り当てます)のメモリをヒープ領域に割り当てます。  
malloc()と違い、割り当てたメモリはゼロクリアしてあることが保証されます。  
  
calloc()で確保したメモリ領域は後述するfree()で必ず開放します。
