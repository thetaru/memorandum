# スケジュールの考え方
## ■ バックアップ方法
|バックアップ方法|説明|
|:---|:---|
|フルバックアップ|バックアップ時間や容量が多くなるが、フルバックアップデータ1つで復旧できる。|
|差分バックアップ|フルバックアップからの変更データ(新規追加ファイル/更新ファイル)を対象にバックアップを実行する。</br>フルバックアップデータと最後の差分バックアップデータの2つで復旧できる。|
|増分バックアップ|直近のバックアップからの変更データ(新規追加ファイル/更新ファイル)を対象にバックアップを実行する。</br>復旧処理はフルバックアップと全ての増分バックアップデータが必要となる。|

## ■ バックアップデータの保管期間
どの程度まで復旧可能範囲とするかを考慮して保管期間を定義する。  
メディア破損やバックアップの失敗などを考慮し、フルバックアップのデータが最低1世代は残るようにスケジュールを組むと全損を回避できる。

## ■ メディアプール
### 概要
メディアプールは定義されたルールに従い、複数本のメディアでバックアップデータの世代管理を行う機能。  
  
メディアプールに保存されたメディアは
1. 指定された保存期間はバックアップデータを維持
2. 保存期間後に古いデータを削除

1と2を繰り返すことでメディアを再利用し続ける。

### 動作
メディアプールには保存セットと再利用セットの2つがあり、バックアップされたメディアは保存セットに入る。  
保存セット内のメディアは、メディアの保管日数と維持本数の条件を同時に満たすまで保存セット内で保管され、再利用できない。  
逆に、メディアの保管日数と維持本数の条件を同時に満たせばメディアが再利用可能となる。  
  
バックアップ時のメディアの動きは以下の通り
1. メディアプールの保存セットから再利用可能なメディア(メディアAと呼ぶ)を確認
2. メディアAを再利用セットに移動
3. メディアAにバックアップデータを書き込み
4. メディアAを再利用セットから保存セットに移動
