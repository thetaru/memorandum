# アップデートするときに気を付けること
## ■ アップデートのテストをする
本番前に、何のパッケージがアプデされるのか、依存関係は何でコケているかなどを調査しましょう。
```
l yum check-update --releasever=ver
```
rpmの場合は以下です。
```
# rpm --test <pkg>
```
## ■ `nohup`コマンドを使う
サーバに`teraterm`などで接続して`yum update`をしていたときに接続が切れて(切って)しまったなどの経験があるかと思います。  
以下のコマンドで裏で流せます。(セッションが途切れてもそのまま実行されます。)
```
# nohup yum update &
```
というかアプデに関わらず長時間かかる処理を実行する際は`nohup <command> &`を使って裏で走らせましょう。
## ■ アプデ後にすること
confファイルが置き換わってないことを確認する。
```
# find / -name "*.rpmsave" -o ".rpmnew"
```
- .rpmsave

> 設定ファイルが置き換わり、既存の設定ファイルに`.rpmsave`がついているかも。 

- .rpmnew

> 設定ファイルに変更はない(コピーに等しい)
  
もろもろ確認したら**業務影響がないことを確認**しつつ再起動
