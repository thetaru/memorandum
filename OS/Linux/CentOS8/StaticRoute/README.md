# スタティックルートの使い方
自宅サーバのためにやった
## ■ 事前情報
|NW|Interface|ホスト名|IP|
|:---|:---|:---|:---|
|Internal#1|ens224|gw-srv1|192.168.137.254|
|Internal#2|ens224|gw-srv2|192.168.138.254|
|External|ens192|gw-srv1|192.168.137.10|
|External|ens192|gw-srv2|192.168.137.20|

## ■ 構成概要
```
Internal#1 (192.168.137.0/24)  External
|                             |
|        +-----------+        |
| ens224 |           | ens192 |
+--------+  gw-srv1  +--------+ 192.168.0.10
|        |           |        |
|        +-----------+        |
|                             |
                              | GW: 192.168.0.1
                              + ------------------- Internet
Internal#2 (192.168.138.0/24) |
|                             |
|        +-----------+        |
| ens224 |           | ens192 |
+--------+  gw-srv2  +--------+ 192.168.0.20
|        |           |        |
|        +-----------+        |
|                             |
```
## ■ やりたかったこと
Internal#1のネットワークとInternal#2のネットワーク間で通信できるようにする。  
やるべきことはスタティックルートでつなぐだけ。
## ■ 設定
### gw-srv1側の設定
ネクストホップにgw-srv2のens192のIPを指定してやる。
```
# nmcli connection modify ens192 +ipv4.routes "192.168.138.0/24 192.168.0.20"
```
### gw-srv2側の設定
ネクストホップにgw-srvのens192のIPを指定してやる。
```
# nmcli connection modify ens192 +ipv4.routes "192.168.137.0/24 192.168.0.10"
```
