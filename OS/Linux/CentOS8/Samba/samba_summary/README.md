# sambaまとめ
## ■ プロセス
|プロセス|説明|
|:---|:---|
|smbd|ファイル共有、認証など|
|nmbd|ブラウジング機能、NetBIOS名前解決、WINSサーバなど|
|winbindd|Winbind機能|

## ■ ポート番号
|ポート番号|プロトコル|プロセス|説明|
|:---|:---|:---|:---|
|137|UDP|nmbd|NetBIOS名前解決やブラウジング|
|138|UDP|nmbd|NetBIOS名前解決やドメインログオン|
|139|TCP|smbd|ファイル共有|
|445|TCP|smbd|ファイル共有|

## ■ smb.conf
## globalセクション
サーバ全体に関するパラメータを設定するセクションです。
|パラメータ|説明|
|:---|:---|
|workgroup|sambaサーバが所属するワークグループ名もしくはドメイン名を指定する。|
|server role|sambaサーバの動作モードを指定する。|
|netbios name|sambaサーバのNetBIOS名を指定する。|
|server string|サーバに関する説明を記述する。|
|hosts allow|接続を許可するホストを指定する。(指定外のホストは拒否される。)|
|guest account|アカウントが存在しないユーザにゲストとしてアクセスする場合に利用する。|
|map to guest|sambaユーザとして認証できなかった場合の動作を指定する(Never|Bad User|Bad Password)|
|guest ok|共有のゲストアクセスを許すかどうか指定する。</br>この設定は、map to guestの指定がなされていないと有効にならない。|
|guest only|共有のアクセスをすべてゲスト権限にするかどうか指定する。</br>この設定は、map to guestの指定がなされていないと有効にならない。|
|log file|ログファイルを指定する。</br>ログフォーマットを変更することもできる。|
|log level|出力するログのレベルを指定する。|
|max log size|ログファイルの最大サイズを指定する。0の場合は無制限となる。|
|encrypt passwords|暗号化パスワードを利用する。|
|smb passwd file|パスワード認証をsmbpasswd方式で行う場合のパスワードファイルを指定する。|
|logon script|ログオン時に実行するスクリプトファイルを指定する。|

## shareセクション
|パラメータ|説明|
|:---|:---|
|comment|コメントを指定する。|
|browseable|ブラウジングした際に表示されるかどうかを指定する。ただし、共有名を直接指定するとアクセス可能。|
|writable|書き込みを許可するかどうかを指定する。|
|read only|読み込みのみにするかどうかを指定する。|
|write list|書き込みが例外的に許可されるユーザを指定する。(カンマ区切りで複数選択可)</br>グループによる指定をする場合は、グループ名の前に@を付ける。|
|path|共有ディレクトリのパスを指定する。|
|force user|共有内に作成するファイルやディレクトリの所有者、所有グループを、強制的に指定したユーザーにする。|
|force group|共有内に作成するファイルやディレクトリの所有者、所有グループを、強制的に指定したグループにする。|
|hide dot files|隠し属性を適用するかどうかを指定する。|
|veto files|表示もアクセスもさせたくないファイルやディレクトリを指定する。|
|create mask|ファイルに適用可能なパーミッション(デフォルトは0744)|
|directory mask|ディレクトリに適用可能なパーミッション(デフォルトは0755)|
|force create mask|必ずファイルに適用されるパーミッション(デフォルトは0000)|
|force directory mask|必ずディレクトリに適用されるパーミッション(デフォルトは0000)|
|valid users|ディレクトリにアクセス可能なユーザの指定する。</br>%Sを指定すると自分以外のユーザはアクセス不可となる。|


